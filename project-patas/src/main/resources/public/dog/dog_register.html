<!DOCTYPE html>
<html>
	<head>
		<title>Cadastro de Cachorro</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
		
		<script type="text/javascript">
			function serialToJson(serial) {
				var dict = {};
				
				var pairs = serial.split("&");
				
				// BRUTEFORCE
				
				for (var i = 0, len = pairs.length; i < len; i++) {
					var current_pair = pairs[i].split("=");
					
					if (i == 1 || i == 6) {
						dict[current_pair[0]] = parseInt(current_pair[1]);
					}
					else if (i == 8 || i == 11) {
						if (current_pair[1] == "Sim") {
							dict[current_pair[0]] = true;
						}
						else {
							dict[current_pair[0]] = false;
						}
					}
					else if (i == 5 || i == 7 || i == 9) {
						dict[current_pair[0]] = 1507686806954;
					}
					else {
						dict[current_pair[0]] = current_pair[1];
					}
				}
				
				json = JSON.stringify(dict);
				
				return json;
			}
		
			// THE AJAX SCRIPT IN THIS PART WON'T WORK
			
			$(document).ready(function() {
				$( "#register_form" ).submit(function() {
					alert(serialToJson( $( "#register_form" ).serialize() ) );
					
					$.ajax({
						url: "http://localhost:8080/dogPost",
						type: "POST",
						dataType: "json",
						data: serialToJson( $( "#register_form" ).serialize() ),
						contentType: "application/json; charset=UTF-8",
						error: function(xhr, textStatus, error){
							console.log(xhr.statusText);
							console.log(textStatus);
							console.log(error);
						}
					});
				});
			});
		</script>
	</head>
	<body>
		<form action="http://localhost:8080/dog/dog_register.html" id="register_form">
			
			<label for="name">Nome</label>
			<input type="text" name="name" placeholder="Nome do cachorro">
			
			<label for="weight">Peso</label>
			<input type="text" name="weight" placeholder="Peso do cachorro">
			
			<label for="gender">Sexo</label>
			<input type="text" name="gender" placeholder="Sexo do cachorro">
			
			<label for="size">Porte</label>
			<input type="text" name="size" placeholder="Porte do cachorro">
			
			<label for="pelageColor">Cor do pelo</label>
			<input type="text" name="pelageColor" placeholder="Cor do pelo do cachorro">
			
			<label for="dateBirth">Data de nascimento</label>
			<input type="text" name="dateBirth" placeholder="Data de nascimento do cachorro">
			
			<label for="age">Idade</label>
			<input type="text" name="age" value="">
			
			<label for="arrivalDate">Data de chegada</label>
			<input type="date" name="arrivalDate">
			
			<label for="castrated">Castrado</label>
			<input type="radio" name="castrated" value="Sim" checked>
			<input type="radio" name="castrated" value="Não">
			
			<label for="castrationDate">Data de castração</label>
			<input type="date" name="castrationDate">
			
			<label for="availability">Disponibilidade</label>
			<input type="text" name="availability" value="">
			
			<label for="disease">Doenças</label>
			<input type="radio" name="disease" value="Sim" checked>
			<input type="radio" name="disease" value="Não">
			
			<label for="diseaseDescription">Descrição</label>
			<input type="text" name="diseaseDescription" placeholder="Doença do cachorro">
			
			<label for="godfathers">Padrinhos</label>
			<input type="text" name="godfathers" placeholder="Padrinho do cachorro">
			
			<input type="submit" id="register" value="Cadastrar">
		
		</form>
	
	</body>
</html>
